import{j as e,m as h,r as d,_ as b}from"./vendor-B2Wt-wJ2.js";import{a as m}from"./supabaseClient-B2YFH3xu.js";import{s as g}from"./sprite-BQo7bBtb.js";const v="_container_3b3ob_1",y="_projects_3b3ob_11",w="_loadingContainer_3b3ob_20",k="_errorContainer_3b3ob_21",N="_notificationBanner_3b3ob_35",L="_infoNotificationBanner_3b3ob_45",r={container:v,projects:y,loadingContainer:w,errorContainer:k,notificationBanner:N,infoNotificationBanner:L},I="_project_on0ns_1",P="_projectHeader_on0ns_95",C="_projectLinks_on0ns_103",M="_githubIcon_on0ns_113",E="_linkIcon_on0ns_121",S="_folderIcon_on0ns_130",$="_techList_on0ns_158",s={project:I,projectHeader:P,projectLinks:C,githubIcon:M,linkIcon:E,folderIcon:S,techList:$},B={hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.5}}},H=({project:t})=>{const a=n=>{const i=n.currentTarget,f=i.getBoundingClientRect(),c=n.clientX-f.left,o=n.clientY-f.top;i.style.setProperty("--x",c.toString()),i.style.setProperty("--y",o.toString())},p=n=>{n.currentTarget.setAttribute("data-glow","true")},j=n=>{n.currentTarget.setAttribute("data-glow","false")};return e.jsx(h.li,{className:s.project,variants:B,onMouseMove:a,onMouseEnter:p,onMouseLeave:j,"data-glow":"false",children:e.jsxs("article",{children:[e.jsxs("div",{className:s.projectHeader,children:[e.jsx("svg",{className:s.folderIcon,width:"50",height:"50",children:e.jsx("use",{href:`${g}#icon-folder`})}),e.jsxs("nav",{className:s.projectLinks,children:[t.githubLink&&e.jsx(h.a,{href:t.githubLink,target:"_blank",rel:"noreferrer",whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":`View ${t.title} source code on GitHub`,children:e.jsx("svg",{className:s.githubIcon,width:"50",height:"50",children:e.jsx("use",{href:`${g}#icon-github`})})}),t.liveLink&&e.jsx(h.a,{href:t.liveLink,target:"_blank",rel:"noreferrer",whileHover:{scale:1.1},whileTap:{scale:.95},"aria-label":`Visit ${t.title} live project`,children:e.jsx("svg",{className:s.linkIcon,width:"50",height:"50",children:e.jsx("use",{href:`${g}#icon-external-link`})})})]})]}),e.jsxs("div",{className:s.projectContent,children:[e.jsx("h3",{children:t.title}),e.jsx("p",{children:t.description})]}),e.jsx("div",{className:s.projectFooter,children:e.jsx("ul",{className:s.techList,children:t.technologies.map(n=>e.jsx("li",{children:n},n))})})]})})},V={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},x=async()=>{try{return(await b(()=>import("./projects-D3kpxSr3.js"),[])).projects}catch(t){return console.error("Failed to load fallback projects:",t),[]}},R=()=>{const[t,a]=d.useState([]),[p,j]=d.useState(!0),[n,i]=d.useState(null),[f,c]=d.useState(!1);return d.useEffect(()=>{async function o(){try{j(!0);const u=await m();if(u.length===0){console.log("Supabase returned an empty array, falling back to static data");const l=await x();a(l.filter(_=>_.active!==!1)),c(!0),i("Using cached project data.")}else a(u.filter(l=>l.active!==!1)),i(null),c(!1)}catch(u){console.error("Failed to fetch projects:",u),i("Failed to load projects. Using cached project data."),c(!0);const l=await x();a(l.filter(_=>_.active!==!1))}finally{j(!1)}}o()},[]),p?e.jsxs("section",{id:"projects",className:`${r.container} container`,children:[e.jsx("h2",{children:"My Projects"}),e.jsx("div",{className:r.loadingContainer,children:e.jsx("p",{children:"Loading projects..."})})]}):n&&t.length===0?e.jsxs("section",{id:"projects",className:`${r.container} container`,children:[e.jsx("h2",{children:"My Projects"}),e.jsx("div",{className:r.errorContainer,children:e.jsx("p",{children:n})})]}):e.jsxs("section",{id:"projects",className:`${r.container} container`,children:[e.jsx(h.h2,{initial:{opacity:0,y:-20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.5},children:"My Projects"}),e.jsx(h.ul,{className:r.projects,variants:V,initial:"hidden",whileInView:"visible",viewport:{once:!0},children:t.map(o=>e.jsx(H,{project:o},typeof o.id=="string"?o.id:o.slug||o.id.toString()))})]})};export{R as default};
