import{r as a,j as e,c as w,L as C,D as j,d as g,f as V,g as N,h as S,i as D,k as L,l as E}from"./vendor-B2Wt-wJ2.js";import{g as P}from"./supabaseClient-B2YFH3xu.js";const m={filePath:"cv/Andrii_Zhygalko_FS_Developer.pdf",title:"Andrii Zhygalko - CV",downloadName:"Andrii_Zhygalko_CV.pdf"},R="_container_1y7mn_1",F="_header_1y7mn_10",U="_toolbar_1y7mn_23",T="_backLink_1y7mn_33",z="_backSymbol_1y7mn_43",B="_backButton_1y7mn_47",I="_title_1y7mn_56",O="_button_1y7mn_63",A="_buttonIcon_1y7mn_73",W="_pdfContainer_1y7mn_77",Z="_buttonText_1y7mn_154",t={container:R,header:F,toolbar:U,backLink:T,backSymbol:z,backButton:B,title:I,button:O,buttonIcon:A,pdfContainer:W,buttonText:Z};g.workerSrc=`https://unpkg.com/pdfjs-dist@${V}/build/pdf.worker.min.mjs`;function $(){const u=a.useRef(null),r=a.useRef(null),_=a.useRef(!1),[i,h]=a.useState();a.useEffect(()=>{document.title=m.title,P(m.filePath).then(o=>{h(o)}).catch(o=>{console.error("Error fetching PDF URL:",o)})},[]),a.useEffect(()=>{if(!i)return;async function o(){if(!(_.current||!u.current))try{const n=u.current.querySelector(".pdfViewerContainer");if(!n)throw new Error("Viewer container not found");const c=n.querySelector(".pdfViewer");c&&c.remove();const s=document.createElement("div");s.className="pdfViewer",n.appendChild(s);const l=new N,d=new S({eventBus:l}),x=new D({eventBus:l,linkService:d}),p=new L({container:n,eventBus:l,linkService:d,findController:x,l10n:void 0,textLayerMode:2});r.current=p,d.setViewer(p);const b=await E(i).promise;p.setDocument(b),d.setDocument(b);const f=()=>{var k;if((k=r.current)!=null&&k.pagesCount)try{window.innerWidth<=480?r.current.currentScaleValue="page-fit":window.innerWidth<=768?r.current.currentScaleValue="page-width":r.current.currentScale=1}catch(y){console.error("Error setting scale:",y)}};return window.addEventListener("resize",f),l.on("pagesloaded",()=>{setTimeout(f,100)}),_.current=!0,()=>{window.removeEventListener("resize",f)}}catch(n){console.error("Error initializing PDF viewer:",n);return}}return o(),()=>{var n,c;r.current&&((c=(n=r.current).cleanup)==null||c.call(n)),r.current=null,_.current=!1}},[i]);const v=async()=>{if(i)try{const n=await(await fetch(i)).blob(),c=window.URL.createObjectURL(n),s=document.createElement("a");s.href=c,s.download=m.downloadName,document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(c)}catch(o){console.error("Download failed:",o)}};return i?e.jsxs("div",{className:t.container,children:[e.jsx("header",{className:w(t.header),children:e.jsxs("div",{className:w(t.toolbar),children:[e.jsxs(C,{to:"/",className:t.backLink,children:[e.jsx("span",{className:t.backSymbol,children:"<"}),e.jsx("span",{className:t.backButton,children:"Portfolio"})]}),e.jsx("h1",{className:t.title,children:"CV Preview"}),e.jsxs("button",{onClick:v,className:w(t.button,"button"),type:"button",children:[e.jsx("span",{className:t.buttonText,children:"Download PDF"}),e.jsx(j,{className:t.buttonIcon,size:20})]})]})}),e.jsx("div",{ref:u,className:t.pdfContainer,children:e.jsx("div",{className:"pdfViewerContainer",children:e.jsx("div",{className:"pdfViewer"})})})]}):null}export{$ as default};
